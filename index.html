<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chospleng Payroll v4 - PT. Chospleng Indonesia</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
</head>
<body>
  <div class="page">
    <header class="site-header">
      <div class="brand"><img src="assets/logo.png" alt="logo" class="logo"/><div class="brand-text"><h1>PT. Chospleng Indonesia</h1><div class="tag">Oriental Food</div></div></div>
      <nav id="top-nav" class="top-nav hidden">
        <div id="nav-hrd" class="nav-role hidden">
          <button data-view="karyawan" class="nav-btn">Data Karyawan</button>
          <button data-view="absensi" class="nav-btn">Absensi Bulanan</button>
          <button data-view="payroll" class="nav-btn">Generate Payroll</button>
        </div>
        <div id="nav-owner" class="nav-role hidden">
          <button data-view="rekap" class="nav-btn">Rekap Gaji</button>
          <button data-view="sliplist" class="nav-btn">Slip Gaji</button>
        </div>
        <div class="nav-right"><span id="userRole"></span> • <button id="btnLogout" class="link">Logout</button></div>
      </nav>
    </header>

    <main class="main">
      <section id="login-view" class="card center">
        <h2>Login</h2>
        <form id="loginForm">
          <label>Username</label><input id="username" required />
          <label>Password</label><input id="password" type="password" required />
          <div style="display:flex;gap:8px;margin-top:12px">
            <button class="primary" type="submit">Masuk</button>
          </div>
        </form>
      </section>

      <section id="karyawan-view" class="card view hidden">
        <h3>Data Karyawan</h3>
        <div class="form-like slip-sample">
          <div class="row"><label>Nama</label><input id="emp-name" /></div>
          <div class="row"><label>Jabatan</label><input id="emp-role" /></div>
          <div class="row"><label>Tanggal Mulai Periode</label><input id="emp-start" type="date" /></div>
          <div class="row"><label>Tanggal Akhir Periode</label><input id="emp-end" type="date" /></div>
          <div class="row"><label>Gaji Pokok (per hari)</label><input id="emp-base" type="number" value="50000" /></div>
          <div class="row"><label>Uang Makan</label><input id="emp-makan" type="number" value="10000" /></div>
          <div class="row"><label>Uang Bensin</label><input id="emp-bensin" type="number" value="10000" /></div>
          <div class="row"><label>Pajak (%)</label><input id="emp-tax" type="number" value="0" /></div>
          <div class="row fullwidth preview-area" id="calcPreview" style="grid-column:1 / -1"></div>
          <div style="display:flex;gap:8px;margin-top:8px;grid-column:1 / -1"><button id="saveEmp" class="primary">Simpan</button><button id="newEmp" class="ghost">Bersihkan</button></div>
        </div>
        <div id="list-emp" class="list"></div>
      </section>

      <section id="absensi-view" class="card view hidden">
        <h3>Absensi Bulanan</h3>
        <div class="form-like slip-sample">
          <div class="row"><label>Pilih Karyawan</label><select id="att-emp"></select></div>
          <div class="row"><label>Bulan</label><input id="att-month" type="month" /></div>
          <div class="row fullwidth" style="grid-column:1 / -1"><div class="small">Petunjuk: Klik pada kotak tanggal untuk mengubah status (Masuk/Alfa/Izin/Sakit). Jika Masuk, masukkan jam datang. Sistem otomatis menghitung keterlambatan (lebih dari 08:00) dan potongan per periode.</div></div>
          <div class="row fullwidth" style="grid-column:1 / -1"><button id="loadGrid" class="primary">Muat Grid Bulanan</button> <button id="saveGrid" class="ghost">Simpan Grid</button></div>
        </div>
        <div id="grid-container" class="card" style="margin-top:12px"></div>
        <div id="absensi-summary" class="card" style="margin-top:12px"></div>
      </section>

      <section id="payroll-view" class="card view hidden">
        <h3>Generate Payroll</h3>
        <div class="row" style="gap:12px;align-items:center">
          <label>Periode</label><input id="pay-period" type="month" />
          <button id="genPayroll" class="primary">Generate</button>
        </div>
        <div id="pay-res"></div>
      </section>

      <section id="rekap-view" class="card view hidden">
        <h3>Rekap Gaji</h3>
        <div id="rekap-list"></div>
      </section>

      <section id="sliplist-view" class="card view hidden">
        <h3>Slip Gaji</h3>
        <div id="slip-list"></div>
      </section>

    </main>

    <footer class="footer">© PT. Chospleng Indonesia</footer>
  </div>

  <div id="modal" class="modal hidden"></div>

<script src="app.js"></script>
</body>
</html>
